<!-- starter-webpage-gallery.html
     A beginner-friendly single-file webpage to store/preview images, GIFs and play one MP3.
     How to use:
       1) Save this file as `starter-webpage-gallery.html`.
       2) Create a folder next to it called `media/` and drop your pictures/gifs/mp3 there OR
          simply use the "Add files" button below to load files locally into the page (they won't persist after reload).
       3) To host online and keep files persistently, you'll need a server - I can provide a Flask (Python) or simple Java/Servlet example.

     Notes for beginners:
       - Browsers cannot permanently save files from this page without a server.
       - The demo below shows a simple gallery + file input and an audio player.
-->

<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>My Media Gallery — Beginner Version</title>
  <style>
    :root{--bg:#0f1724;--card:#0b1220;--muted:#9aa4b2;--accent:#7dd3fc}
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial; margin:0; background:linear-gradient(180deg,#071129 0%, #0b1a2b 100%); color:#e6eef6}
    header{padding:20px 24px; display:flex;align-items:center;gap:16px}
    h1{margin:0;font-size:20px}
    p.lead{margin:4px 0 0;color:var(--muted);font-size:13px}
    .wrap{max-width:980px;margin:18px auto;padding:16px}
    .controls{display:flex;gap:12px;flex-wrap:wrap;margin-bottom:12px}
    .card{background:rgba(255,255,255,0.03);padding:12px;border-radius:12px;box-shadow:0 6px 18px rgba(2,6,23,0.6)}
    button, .file-btn{background:transparent;border:1px solid rgba(255,255,255,0.08);padding:8px 12px;border-radius:10px;color:inherit;cursor:pointer}
    input[type=file]{display:none}
    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(160px,1fr));gap:12px}
    .thumb{position:relative;overflow:hidden;border-radius:10px;background:#071021}
    .thumb img{width:100%;height:160px;object-fit:cover;display:block}
    .caption{padding:8px;font-size:13px;color:var(--muted)}
    .empty{padding:40px;text-align:center;color:var(--muted);border:2px dashed rgba(255,255,255,0.03);border-radius:10px}
    audio{width:100%;margin-top:8px}
    .row{display:flex;gap:12px;align-items:center}
    .small{font-size:12px;color:var(--muted)}
    .controls .search{flex:1}
    .search input{width:100%;padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:inherit}
    footer{margin-top:18px;color:var(--muted);font-size:13px;text-align:center}
    @media (max-width:480px){.thumb img{height:120px}}
  </style>
</head>
<body>
  <header>
    <div style="width:44px;height:44px;border-radius:10px;background:linear-gradient(135deg,var(--accent),#2dd4bf);display:flex;align-items:center;justify-content:center;font-weight:700;color:#012">MG</div>
    <div>
      <h1>My Media Gallery</h1>
      <p class="lead">Simple page to preview images/gifs and play one MP3. Files added via the button are temporary (in-memory).</p>
    </div>
  </header>

  <main class="wrap">
    <section class="card controls">
      <div class="row" style="width:100%">
        <label class="file-btn" for="fileInput">➕ Add files</label>
        <input id="fileInput" type="file" accept="image/*,audio/mpeg" multiple />
        <div class="search" style="margin-left:8px">
          <input id="q" placeholder="Filter by filename (type to filter)" />
        </div>
        <button id="clearBtn" title="Clear current in-memory files">Clear</button>
      </div>
      <div style="margin-top:10px" class="small">Supported: .jpg .jpeg .png .gif and one .mp3. Use the audio player below to play the mp3. File uploads are only stored while this page is open.</div>
    </section>

    <section class="card" style="margin-top:12px">
      <h3 style="margin:6px 0">Gallery</h3>
      <div id="gallery" class="grid empty">No media yet — click "Add files" to select pictures and one mp3.</div>

      <div style="margin-top:12px">
        <h3 style="margin:6px 0">Audio</h3>
        <div id="audioArea" class="card" style="padding:12px">
          <div class="small">No MP3 loaded.</div>
        </div>
      </div>
    </section>

    <footer>
      Tip: to make this available on the web, you'll need hosting and (optionally) a small server program to store uploaded files. I can give a Flask or Java example that saves uploads to disk.
    </footer>
  </main>

  <script>
    // Simple in-memory gallery. Files are not saved to your disk by the page.
    const fileInput = document.getElementById('fileInput');
    const gallery = document.getElementById('gallery');
    const audioArea = document.getElementById('audioArea');
    const clearBtn = document.getElementById('clearBtn');
    const q = document.getElementById('q');

    // State
    let items = []; // {name, type, url, file}

    function renderGallery(filter=''){
      const list = items.filter(it => it.type.startsWith('image/') && it.name.toLowerCase().includes(filter.toLowerCase()));
      if(list.length===0){
        gallery.classList.add('empty');
        gallery.innerHTML = '<div class="empty">No images/gifs match your query.</div>';
        return;
      }
      gallery.classList.remove('empty');
      gallery.innerHTML = '';
      for(const it of list){
        const el = document.createElement('div');
        el.className = 'thumb card';
        el.innerHTML = `\n          <img alt="${escapeHtml(it.name)}" src="${it.url}" />\n          <div class="caption">${escapeHtml(it.name)}</div>\n        `;
        gallery.appendChild(el);
      }
    }

    function renderAudio(){
      const audio = items.find(it => it.type === 'audio/mpeg');
      if(!audio){
        audioArea.innerHTML = '<div class="small">No MP3 loaded.</div>';
        return;
      }
      audioArea.innerHTML = `\n        <div style=\"font-weight:600;margin-bottom:6px\">${escapeHtml(audio.name)}</div>\n        <audio controls src=\"${audio.url}\"></audio>\n        <div class=\"small\" style=\"margin-top:6px\">This audio is played from memory only; refresh to remove it.</div>\n      `;
    }

    function handleFiles(fileList){
      // We allow multiple images and one mp3. If multiple mp3s given, keep the first.
      for(const file of Array.from(fileList)){
        const t = file.type;
        if(!t.startsWith('image/') && t !== 'audio/mpeg') continue;
        const url = URL.createObjectURL(file);
        // If audio and already present, skip additional audio
        if(t === 'audio/mpeg' && items.some(it => it.type === 'audio/mpeg')) continue;
        items.push({name:file.name, type:t, url, file});
      }
      renderGallery(q.value);
      renderAudio();
    }

    fileInput.addEventListener('change', e => {
      handleFiles(e.target.files);
      // Reset input so same file can be selected again if needed
      fileInput.value = '';
    });

    q.addEventListener('input', ()=> renderGallery(q.value));

    clearBtn.addEventListener('click', ()=>{
      // revoke object URLs
      for(const it of items) URL.revokeObjectURL(it.url);
      items = [];
      renderGallery();
      renderAudio();
    });

    // Helper: escape HTML to avoid injection in filenames
    function escapeHtml(s){
      return s.replace(/[&<>\"']/g, c => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[c]));
    }

    // Optional: preload files from ./media/ if you saved static files there. You must edit the list below with real filenames.
    // Example:
    // const staticFiles = [ 'media/photo1.jpg', 'media/party.gif', 'media/song.mp3' ];
    // If you save staticFiles, uncomment the code below and add file names.
    //
    // (Browsers block reading folders directly — this only works for files that actually exist and are served by a webserver.)
    //
    /*
    const staticFiles = [];
    async function preloadStatic(){
      for(const path of staticFiles){
        try{
          const res = await fetch(path);
          if(!res.ok) continue;
          const blob = await res.blob();
          const url = URL.createObjectURL(blob);
          items.push({name:path.split('/').pop(), type:blob.type, url, file:null});
        }catch(e){console.warn('Cannot load',path,e)}
      }
      renderGallery();
      renderAudio();
    }
    preloadStatic();
    */

    // Initial render
    renderGallery();
    renderAudio();
  </script>
</body>
</html>

